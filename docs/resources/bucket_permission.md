---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "garage_bucket_permission Resource - garage"
subcategory: ""
description: |-
  Manages permissions for an access key on a Garage S3 bucket.
---

# garage_bucket_permission (Resource)

Manages permissions for an access key on a Garage S3 bucket.

This resource allows you to grant or revoke read, write, and owner permissions for access keys on specific buckets.

## Example Usage

```terraform
terraform {
  required_providers {
    garage = {
      source = "jkossis/garage"
    }
  }
}

provider "garage" {
  endpoint = "http://localhost:3903"
  token    = "your-admin-token-here"
}

# Create a bucket
resource "garage_bucket" "example" {
  global_alias = "my-bucket"
}

# Create an access key
resource "garage_key" "example" {
  name = "my-app-key"
}

# Grant read and write permissions
resource "garage_bucket_permission" "example" {
  bucket_id     = garage_bucket.example.id
  access_key_id = garage_key.example.id
  read          = true
  write         = true
  owner         = false
}

# Grant owner permissions (includes read and write)
resource "garage_bucket_permission" "owner" {
  bucket_id     = garage_bucket.example.id
  access_key_id = garage_key.example.id
  read          = true
  write         = true
  owner         = true
}

# Read-only access
resource "garage_bucket_permission" "readonly" {
  bucket_id     = garage_bucket.another.id
  access_key_id = garage_key.example.id
  read          = true
  write         = false
  owner         = false
}

# Multiple keys with different permissions on the same bucket
resource "garage_key" "admin" {
  name = "admin-key"
}

resource "garage_key" "readonly_user" {
  name = "readonly-key"
}

resource "garage_bucket_permission" "admin_access" {
  bucket_id     = garage_bucket.example.id
  access_key_id = garage_key.admin.id
  read          = true
  write         = true
  owner         = true
}

resource "garage_bucket_permission" "readonly_access" {
  bucket_id     = garage_bucket.example.id
  access_key_id = garage_key.readonly_user.id
  read          = true
  write         = false
  owner         = false
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `access_key_id` (String) The ID of the access key.
- `bucket_id` (String) The ID of the bucket.

### Optional

- `owner` (Boolean) Grant owner permission to the access key.
- `read` (Boolean) Grant read permission to the access key.
- `write` (Boolean) Grant write permission to the access key.

### Read-Only

- `id` (String) The unique identifier of the permission (format: bucket_id/access_key_id).

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Garage bucket permissions can be imported using the format: bucket_id/access_key_id
terraform import garage_bucket_permission.example bucket-id/access-key-id
```

## Permission Types

### Read Permission
Grants the ability to:
- List objects in the bucket
- Download objects from the bucket
- Read bucket metadata

### Write Permission
Grants the ability to:
- Upload objects to the bucket
- Delete objects from the bucket
- Modify object metadata

### Owner Permission
Grants the ability to:
- Perform all read and write operations
- Modify bucket settings
- Grant permissions to other access keys
- Delete the bucket

**Note:** Owner permission typically requires both `read` and `write` to be `true` as well.

## Behavior

- **Create**: Grants the specified permissions to the access key on the bucket
- **Update**: Modifies permissions by granting or revoking individual permission types
- **Delete**: Revokes all permissions from the access key on the bucket
- **Import**: Imports existing bucket permissions using the `bucket_id/access_key_id` format

## Notes

- Both the bucket and access key must exist before creating a permission resource
- Changing `bucket_id` or `access_key_id` will force recreation of the resource
- Permission changes are applied incrementally - you can grant or revoke individual permissions without affecting others
- Deleting the permission resource revokes all permissions but does not delete the bucket or access key
